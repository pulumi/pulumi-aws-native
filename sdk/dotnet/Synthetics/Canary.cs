// *** WARNING: this file was generated by pulumi-language-dotnet. ***
// *** Do not edit by hand unless you're certain you know what you are doing! ***

using System;
using System.Collections.Generic;
using System.Collections.Immutable;
using System.Threading.Tasks;
using Pulumi.Serialization;

namespace Pulumi.AwsNative.Synthetics
{
    /// <summary>
    /// Resource Type definition for AWS::Synthetics::Canary
    /// 
    /// ## Example Usage
    /// ### Example
    /// ```csharp
    /// using System.Collections.Generic;
    /// using System.Linq;
    /// using Pulumi;
    /// using AwsNative = Pulumi.AwsNative;
    /// 
    /// return await Deployment.RunAsync(() =&gt; 
    /// {
    ///     var syntheticsCanary = new AwsNative.Synthetics.Canary("syntheticsCanary", new()
    ///     {
    ///         Name = "samplecanary",
    ///         ExecutionRoleArn = "arn:aws:iam::123456789012:role/my-lambda-execution-role-to-run-canary",
    ///         Code = new AwsNative.Synthetics.Inputs.CanaryCodeArgs
    ///         {
    ///             Handler = "pageLoadBlueprint.handler",
    ///             S3Bucket = "aws-synthetics-code-myaccount-canary1",
    ///             S3Key = "my-script-location",
    ///         },
    ///         ArtifactS3Location = "s3://my-results-bucket",
    ///         RuntimeVersion = "syn-nodejs-puppeteer-3.3",
    ///         Schedule = new AwsNative.Synthetics.Inputs.CanaryScheduleArgs
    ///         {
    ///             Expression = "rate(1 minute)",
    ///             DurationInSeconds = "3600",
    ///         },
    ///         RunConfig = new AwsNative.Synthetics.Inputs.CanaryRunConfigArgs
    ///         {
    ///             TimeoutInSeconds = 60,
    ///         },
    ///         FailureRetentionPeriod = 30,
    ///         SuccessRetentionPeriod = 30,
    ///         Tags = new[]
    ///         {
    ///             new AwsNative.Inputs.TagArgs
    ///             {
    ///                 Key = "key00AtCreate",
    ///                 Value = "value001AtCreate",
    ///             },
    ///         },
    ///         StartCanaryAfterCreation = true,
    ///     });
    /// 
    /// });
    /// 
    /// 
    /// ```
    /// ### Example
    /// ```csharp
    /// using System.Collections.Generic;
    /// using System.Linq;
    /// using Pulumi;
    /// using AwsNative = Pulumi.AwsNative;
    /// 
    /// return await Deployment.RunAsync(() =&gt; 
    /// {
    ///     var syntheticsCanary = new AwsNative.Synthetics.Canary("syntheticsCanary", new()
    ///     {
    ///         Name = "samplecanary",
    ///         ExecutionRoleArn = "arn:aws:iam::123456789012:role/my-lambda-execution-role-to-run-canary",
    ///         Code = new AwsNative.Synthetics.Inputs.CanaryCodeArgs
    ///         {
    ///             Handler = "pageLoadBlueprint.handler",
    ///             Script = @"var synthetics = require('Synthetics');
    /// const log = require('SyntheticsLogger');
    /// const pageLoadBlueprint = async function () {
    /// // INSERT URL here
    /// const URL = ""https://amazon.com"";
    /// 
    /// let page = await synthetics.getPage();
    /// const response = await page.goto(URL, {waitUntil: 'domcontentloaded', timeout: 30000});
    /// //Wait for page to render.
    /// //Increase or decrease wait time based on endpoint being monitored.
    /// await page.waitFor(15000);
    /// await synthetics.takeScreenshot('loaded', 'loaded');
    /// let pageTitle = await page.title();
    /// log.info('Page title: ' + pageTitle);
    /// if (response.status() !== 200) {
    ///      throw ""Failed to load page!"";
    /// }
    /// };
    /// 
    /// exports.handler = async () =&gt; {
    /// return await pageLoadBlueprint();
    /// };
    /// ",
    ///         },
    ///         ArtifactS3Location = "s3://my-results-bucket",
    ///         RuntimeVersion = "syn-nodejs-puppeteer-3.3",
    ///         Schedule = new AwsNative.Synthetics.Inputs.CanaryScheduleArgs
    ///         {
    ///             Expression = "rate(1 minute)",
    ///             DurationInSeconds = "3600",
    ///         },
    ///         RunConfig = new AwsNative.Synthetics.Inputs.CanaryRunConfigArgs
    ///         {
    ///             TimeoutInSeconds = 60,
    ///         },
    ///         FailureRetentionPeriod = 30,
    ///         SuccessRetentionPeriod = 30,
    ///         Tags = new[]
    ///         {
    ///             new AwsNative.Inputs.TagArgs
    ///             {
    ///                 Key = "key00AtCreate",
    ///                 Value = "value001AtCreate",
    ///             },
    ///         },
    ///         StartCanaryAfterCreation = false,
    ///     });
    /// 
    /// });
    /// 
    /// 
    /// ```
    /// </summary>
    [AwsNativeResourceType("aws-native:synthetics:Canary")]
    public partial class Canary : global::Pulumi.CustomResource
    {
        /// <summary>
        /// Provide artifact configuration
        /// </summary>
        [Output("artifactConfig")]
        public Output<Outputs.CanaryArtifactConfig?> ArtifactConfig { get; private set; } = null!;

        /// <summary>
        /// Provide the s3 bucket output location for test results
        /// </summary>
        [Output("artifactS3Location")]
        public Output<string> ArtifactS3Location { get; private set; } = null!;

        /// <summary>
        /// Id of the canary
        /// </summary>
        [Output("awsId")]
        public Output<string> AwsId { get; private set; } = null!;

        /// <summary>
        /// Provide the canary script source
        /// </summary>
        [Output("code")]
        public Output<Outputs.CanaryCode> Code { get; private set; } = null!;

        /// <summary>
        /// Deletes associated lambda resources created by Synthetics if set to True. Default is False
        /// </summary>
        [Output("deleteLambdaResourcesOnCanaryDeletion")]
        public Output<bool?> DeleteLambdaResourcesOnCanaryDeletion { get; private set; } = null!;

        /// <summary>
        /// Setting to control if UpdateCanary will perform a DryRun and validate it is PASSING before performing the Update. Default is FALSE.
        /// </summary>
        [Output("dryRunAndUpdate")]
        public Output<bool?> DryRunAndUpdate { get; private set; } = null!;

        /// <summary>
        /// Lambda Execution role used to run your canaries
        /// </summary>
        [Output("executionRoleArn")]
        public Output<string> ExecutionRoleArn { get; private set; } = null!;

        /// <summary>
        /// Retention period of failed canary runs represented in number of days
        /// </summary>
        [Output("failureRetentionPeriod")]
        public Output<int?> FailureRetentionPeriod { get; private set; } = null!;

        /// <summary>
        /// Name of the canary.
        /// </summary>
        [Output("name")]
        public Output<string> Name { get; private set; } = null!;

        /// <summary>
        /// Setting to control if provisioned resources created by Synthetics are deleted alongside the canary. Default is AUTOMATIC.
        /// </summary>
        [Output("provisionedResourceCleanup")]
        public Output<Pulumi.AwsNative.Synthetics.CanaryProvisionedResourceCleanup?> ProvisionedResourceCleanup { get; private set; } = null!;

        /// <summary>
        /// List of resources which canary tags should be replicated to.
        /// </summary>
        [Output("resourcesToReplicateTags")]
        public Output<ImmutableArray<Pulumi.AwsNative.Synthetics.CanaryResourceToTag>> ResourcesToReplicateTags { get; private set; } = null!;

        /// <summary>
        /// Provide canary run configuration
        /// </summary>
        [Output("runConfig")]
        public Output<Outputs.CanaryRunConfig?> RunConfig { get; private set; } = null!;

        /// <summary>
        /// Runtime version of Synthetics Library
        /// </summary>
        [Output("runtimeVersion")]
        public Output<string> RuntimeVersion { get; private set; } = null!;

        /// <summary>
        /// Frequency to run your canaries
        /// </summary>
        [Output("schedule")]
        public Output<Outputs.CanarySchedule> Schedule { get; private set; } = null!;

        /// <summary>
        /// Runs canary if set to True. Default is False
        /// </summary>
        [Output("startCanaryAfterCreation")]
        public Output<bool?> StartCanaryAfterCreation { get; private set; } = null!;

        /// <summary>
        /// State of the canary
        /// </summary>
        [Output("state")]
        public Output<string> State { get; private set; } = null!;

        /// <summary>
        /// Retention period of successful canary runs represented in number of days
        /// </summary>
        [Output("successRetentionPeriod")]
        public Output<int?> SuccessRetentionPeriod { get; private set; } = null!;

        /// <summary>
        /// The list of key-value pairs that are associated with the canary.
        /// </summary>
        [Output("tags")]
        public Output<ImmutableArray<Pulumi.AwsNative.Outputs.Tag>> Tags { get; private set; } = null!;

        /// <summary>
        /// Visual reference configuration for visual testing
        /// </summary>
        [Output("visualReference")]
        public Output<Outputs.CanaryVisualReference?> VisualReference { get; private set; } = null!;

        /// <summary>
        /// Provide VPC Configuration if enabled.
        /// </summary>
        [Output("vpcConfig")]
        public Output<Outputs.CanaryVpcConfig?> VpcConfig { get; private set; } = null!;


        /// <summary>
        /// Create a Canary resource with the given unique name, arguments, and options.
        /// </summary>
        ///
        /// <param name="name">The unique name of the resource</param>
        /// <param name="args">The arguments used to populate this resource's properties</param>
        /// <param name="options">A bag of options that control this resource's behavior</param>
        public Canary(string name, CanaryArgs args, CustomResourceOptions? options = null)
            : base("aws-native:synthetics:Canary", name, args ?? new CanaryArgs(), MakeResourceOptions(options, ""))
        {
        }

        private Canary(string name, Input<string> id, CustomResourceOptions? options = null)
            : base("aws-native:synthetics:Canary", name, null, MakeResourceOptions(options, id))
        {
        }

        private static CustomResourceOptions MakeResourceOptions(CustomResourceOptions? options, Input<string>? id)
        {
            var defaultOptions = new CustomResourceOptions
            {
                Version = Utilities.Version,
                ReplaceOnChanges =
                {
                    "name",
                },
            };
            var merged = CustomResourceOptions.Merge(defaultOptions, options);
            // Override the ID if one was specified for consistency with other language SDKs.
            merged.Id = id ?? merged.Id;
            return merged;
        }
        /// <summary>
        /// Get an existing Canary resource's state with the given name, ID, and optional extra
        /// properties used to qualify the lookup.
        /// </summary>
        ///
        /// <param name="name">The unique name of the resulting resource.</param>
        /// <param name="id">The unique provider ID of the resource to lookup.</param>
        /// <param name="options">A bag of options that control this resource's behavior</param>
        public static Canary Get(string name, Input<string> id, CustomResourceOptions? options = null)
        {
            return new Canary(name, id, options);
        }
    }

    public sealed class CanaryArgs : global::Pulumi.ResourceArgs
    {
        /// <summary>
        /// Provide artifact configuration
        /// </summary>
        [Input("artifactConfig")]
        public Input<Inputs.CanaryArtifactConfigArgs>? ArtifactConfig { get; set; }

        /// <summary>
        /// Provide the s3 bucket output location for test results
        /// </summary>
        [Input("artifactS3Location", required: true)]
        public Input<string> ArtifactS3Location { get; set; } = null!;

        /// <summary>
        /// Provide the canary script source
        /// </summary>
        [Input("code", required: true)]
        public Input<Inputs.CanaryCodeArgs> Code { get; set; } = null!;

        /// <summary>
        /// Deletes associated lambda resources created by Synthetics if set to True. Default is False
        /// </summary>
        [Input("deleteLambdaResourcesOnCanaryDeletion")]
        public Input<bool>? DeleteLambdaResourcesOnCanaryDeletion { get; set; }

        /// <summary>
        /// Setting to control if UpdateCanary will perform a DryRun and validate it is PASSING before performing the Update. Default is FALSE.
        /// </summary>
        [Input("dryRunAndUpdate")]
        public Input<bool>? DryRunAndUpdate { get; set; }

        /// <summary>
        /// Lambda Execution role used to run your canaries
        /// </summary>
        [Input("executionRoleArn", required: true)]
        public Input<string> ExecutionRoleArn { get; set; } = null!;

        /// <summary>
        /// Retention period of failed canary runs represented in number of days
        /// </summary>
        [Input("failureRetentionPeriod")]
        public Input<int>? FailureRetentionPeriod { get; set; }

        /// <summary>
        /// Name of the canary.
        /// </summary>
        [Input("name")]
        public Input<string>? Name { get; set; }

        /// <summary>
        /// Setting to control if provisioned resources created by Synthetics are deleted alongside the canary. Default is AUTOMATIC.
        /// </summary>
        [Input("provisionedResourceCleanup")]
        public Input<Pulumi.AwsNative.Synthetics.CanaryProvisionedResourceCleanup>? ProvisionedResourceCleanup { get; set; }

        [Input("resourcesToReplicateTags")]
        private InputList<Pulumi.AwsNative.Synthetics.CanaryResourceToTag>? _resourcesToReplicateTags;

        /// <summary>
        /// List of resources which canary tags should be replicated to.
        /// </summary>
        public InputList<Pulumi.AwsNative.Synthetics.CanaryResourceToTag> ResourcesToReplicateTags
        {
            get => _resourcesToReplicateTags ?? (_resourcesToReplicateTags = new InputList<Pulumi.AwsNative.Synthetics.CanaryResourceToTag>());
            set => _resourcesToReplicateTags = value;
        }

        /// <summary>
        /// Provide canary run configuration
        /// </summary>
        [Input("runConfig")]
        public Input<Inputs.CanaryRunConfigArgs>? RunConfig { get; set; }

        /// <summary>
        /// Runtime version of Synthetics Library
        /// </summary>
        [Input("runtimeVersion", required: true)]
        public Input<string> RuntimeVersion { get; set; } = null!;

        /// <summary>
        /// Frequency to run your canaries
        /// </summary>
        [Input("schedule", required: true)]
        public Input<Inputs.CanaryScheduleArgs> Schedule { get; set; } = null!;

        /// <summary>
        /// Runs canary if set to True. Default is False
        /// </summary>
        [Input("startCanaryAfterCreation")]
        public Input<bool>? StartCanaryAfterCreation { get; set; }

        /// <summary>
        /// Retention period of successful canary runs represented in number of days
        /// </summary>
        [Input("successRetentionPeriod")]
        public Input<int>? SuccessRetentionPeriod { get; set; }

        [Input("tags")]
        private InputList<Pulumi.AwsNative.Inputs.TagArgs>? _tags;

        /// <summary>
        /// The list of key-value pairs that are associated with the canary.
        /// </summary>
        public InputList<Pulumi.AwsNative.Inputs.TagArgs> Tags
        {
            get => _tags ?? (_tags = new InputList<Pulumi.AwsNative.Inputs.TagArgs>());
            set => _tags = value;
        }

        /// <summary>
        /// Visual reference configuration for visual testing
        /// </summary>
        [Input("visualReference")]
        public Input<Inputs.CanaryVisualReferenceArgs>? VisualReference { get; set; }

        /// <summary>
        /// Provide VPC Configuration if enabled.
        /// </summary>
        [Input("vpcConfig")]
        public Input<Inputs.CanaryVpcConfigArgs>? VpcConfig { get; set; }

        public CanaryArgs()
        {
        }
        public static new CanaryArgs Empty => new CanaryArgs();
    }
}
