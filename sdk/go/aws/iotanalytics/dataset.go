// Code generated by pulumi-language-go DO NOT EDIT.
// *** WARNING: Do not edit by hand unless you're certain you know what you are doing! ***

package iotanalytics

import (
	"context"
	"reflect"

	"errors"
	"github.com/pulumi/pulumi-aws-native/sdk/go/aws"
	"github.com/pulumi/pulumi-aws-native/sdk/go/aws/internal"
	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
)

// Resource Type definition for AWS::IoTAnalytics::Dataset
//
// ## Example Usage
// ### Example
//
// ```go
// package main
//
// import (
//
//	"github.com/pulumi/pulumi-aws-native/sdk/go/aws/iotanalytics"
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
//
// )
//
//	func main() {
//		pulumi.Run(func(ctx *pulumi.Context) error {
//			_, err := iotanalytics.NewDataset(ctx, "dataset", &iotanalytics.DatasetArgs{
//				DatasetName: pulumi.String("SimpleSQLDataset"),
//				Actions: iotanalytics.DatasetActionArray{
//					&iotanalytics.DatasetActionArgs{
//						ActionName: pulumi.String("SqlAction"),
//						QueryAction: &iotanalytics.DatasetQueryActionArgs{
//							SqlQuery: pulumi.String("select * from Datastore"),
//						},
//					},
//				},
//				Triggers: iotanalytics.DatasetTriggerArray{
//					&iotanalytics.DatasetTriggerArgs{
//						Schedule: &iotanalytics.DatasetScheduleArgs{
//							ScheduleExpression: pulumi.String("cron(0 12 * * ? *)"),
//						},
//					},
//				},
//			})
//			if err != nil {
//				return err
//			}
//			return nil
//		})
//	}
//
// ```
// ### Example
//
// ```go
// package main
//
// import (
//
//	"github.com/pulumi/pulumi-aws-native/sdk/go/aws/iotanalytics"
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
//
// )
//
//	func main() {
//		pulumi.Run(func(ctx *pulumi.Context) error {
//			_, err := iotanalytics.NewDataset(ctx, "dataset", &iotanalytics.DatasetArgs{
//				DatasetName: pulumi.String("SimpleSQLDataset"),
//				Actions: iotanalytics.DatasetActionArray{
//					&iotanalytics.DatasetActionArgs{
//						ActionName: pulumi.String("SqlAction"),
//						QueryAction: &iotanalytics.DatasetQueryActionArgs{
//							SqlQuery: pulumi.String("select * from Datastore"),
//						},
//					},
//				},
//				Triggers: iotanalytics.DatasetTriggerArray{
//					&iotanalytics.DatasetTriggerArgs{
//						Schedule: &iotanalytics.DatasetScheduleArgs{
//							ScheduleExpression: pulumi.String("cron(0 12 * * ? *)"),
//						},
//					},
//				},
//			})
//			if err != nil {
//				return err
//			}
//			return nil
//		})
//	}
//
// ```
// ### Example
//
// ```go
// package main
//
// import (
//
//	awsnative "github.com/pulumi/pulumi-aws-native/sdk/go/aws"
//	"github.com/pulumi/pulumi-aws-native/sdk/go/aws/iotanalytics"
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
//
// )
//
//	func main() {
//		pulumi.Run(func(ctx *pulumi.Context) error {
//			_, err := iotanalytics.NewDataset(ctx, "dataset", &iotanalytics.DatasetArgs{
//				DatasetName: pulumi.String("ComplexSQLDataset"),
//				Actions: iotanalytics.DatasetActionArray{
//					&iotanalytics.DatasetActionArgs{
//						ActionName: pulumi.String("SqlAction"),
//						QueryAction: &iotanalytics.DatasetQueryActionArgs{
//							SqlQuery: pulumi.String("select * from Datastore"),
//							Filters: iotanalytics.DatasetFilterArray{
//								&iotanalytics.DatasetFilterArgs{
//									DeltaTime: &iotanalytics.DatasetDeltaTimeArgs{
//										OffsetSeconds:  pulumi.Int(1),
//										TimeExpression: pulumi.String("timestamp"),
//									},
//								},
//							},
//						},
//					},
//				},
//				Triggers: iotanalytics.DatasetTriggerArray{
//					&iotanalytics.DatasetTriggerArgs{
//						Schedule: &iotanalytics.DatasetScheduleArgs{
//							ScheduleExpression: pulumi.String("cron(0 12 * * ? *)"),
//						},
//					},
//				},
//				RetentionPeriod: &iotanalytics.DatasetRetentionPeriodArgs{
//					Unlimited:    pulumi.Bool(false),
//					NumberOfDays: pulumi.Int(10),
//				},
//				Tags: aws.TagArray{
//					&aws.TagArgs{
//						Key:   pulumi.String("keyname1"),
//						Value: pulumi.String("value1"),
//					},
//					&aws.TagArgs{
//						Key:   pulumi.String("keyname2"),
//						Value: pulumi.String("value2"),
//					},
//				},
//			})
//			if err != nil {
//				return err
//			}
//			return nil
//		})
//	}
//
// ```
// ### Example
//
// ```go
// package main
//
// import (
//
//	awsnative "github.com/pulumi/pulumi-aws-native/sdk/go/aws"
//	"github.com/pulumi/pulumi-aws-native/sdk/go/aws/iotanalytics"
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
//
// )
//
//	func main() {
//		pulumi.Run(func(ctx *pulumi.Context) error {
//			_, err := iotanalytics.NewDataset(ctx, "dataset", &iotanalytics.DatasetArgs{
//				DatasetName: pulumi.String("ComplexSQLDataset"),
//				Actions: iotanalytics.DatasetActionArray{
//					&iotanalytics.DatasetActionArgs{
//						ActionName: pulumi.String("SqlAction"),
//						QueryAction: &iotanalytics.DatasetQueryActionArgs{
//							SqlQuery: pulumi.String("select * from Datastore"),
//							Filters: iotanalytics.DatasetFilterArray{
//								&iotanalytics.DatasetFilterArgs{
//									DeltaTime: &iotanalytics.DatasetDeltaTimeArgs{
//										OffsetSeconds:  pulumi.Int(1),
//										TimeExpression: pulumi.String("timestamp"),
//									},
//								},
//							},
//						},
//					},
//				},
//				Triggers: iotanalytics.DatasetTriggerArray{
//					&iotanalytics.DatasetTriggerArgs{
//						Schedule: &iotanalytics.DatasetScheduleArgs{
//							ScheduleExpression: pulumi.String("cron(0 12 * * ? *)"),
//						},
//					},
//				},
//				RetentionPeriod: &iotanalytics.DatasetRetentionPeriodArgs{
//					Unlimited:    pulumi.Bool(false),
//					NumberOfDays: pulumi.Int(10),
//				},
//				Tags: aws.TagArray{
//					&aws.TagArgs{
//						Key:   pulumi.String("keyname1"),
//						Value: pulumi.String("value1"),
//					},
//					&aws.TagArgs{
//						Key:   pulumi.String("keyname2"),
//						Value: pulumi.String("value2"),
//					},
//				},
//			})
//			if err != nil {
//				return err
//			}
//			return nil
//		})
//	}
//
// ```
type Dataset struct {
	pulumi.CustomResourceState

	// The `DatasetAction` objects that automatically create the dataset contents.
	Actions DatasetActionArrayOutput `pulumi:"actions"`
	AwsId   pulumi.StringOutput      `pulumi:"awsId"`
	// When dataset contents are created they are delivered to destinations specified here.
	ContentDeliveryRules DatasetContentDeliveryRuleArrayOutput `pulumi:"contentDeliveryRules"`
	// The name of the dataset.
	DatasetName pulumi.StringPtrOutput `pulumi:"datasetName"`
	// A list of data rules that send notifications to CloudWatch, when data arrives late. To specify `lateDataRules` , the dataset must use a [DeltaTimer](https://docs.aws.amazon.com/iotanalytics/latest/APIReference/API_DeltaTime.html) filter.
	LateDataRules DatasetLateDataRuleArrayOutput `pulumi:"lateDataRules"`
	// Optional. How long, in days, message data is kept for the dataset.
	RetentionPeriod DatasetRetentionPeriodPtrOutput `pulumi:"retentionPeriod"`
	// Metadata which can be used to manage the data set.
	//
	// For more information, see [Tag](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-resource-tags.html) .
	Tags aws.TagArrayOutput `pulumi:"tags"`
	// The `DatasetTrigger` objects that specify when the dataset is automatically updated.
	Triggers DatasetTriggerArrayOutput `pulumi:"triggers"`
	// Optional. How many versions of dataset contents are kept. If not specified or set to null, only the latest version plus the latest succeeded version (if they are different) are kept for the time period specified by the `retentionPeriod` parameter. For more information, see [Keeping Multiple Versions of AWS IoT Analytics datasets](https://docs.aws.amazon.com/iotanalytics/latest/userguide/getting-started.html#aws-iot-analytics-dataset-versions) in the *AWS IoT Analytics User Guide* .
	VersioningConfiguration DatasetVersioningConfigurationPtrOutput `pulumi:"versioningConfiguration"`
}

// NewDataset registers a new resource with the given unique name, arguments, and options.
func NewDataset(ctx *pulumi.Context,
	name string, args *DatasetArgs, opts ...pulumi.ResourceOption) (*Dataset, error) {
	if args == nil {
		return nil, errors.New("missing one or more required arguments")
	}

	if args.Actions == nil {
		return nil, errors.New("invalid value for required argument 'Actions'")
	}
	replaceOnChanges := pulumi.ReplaceOnChanges([]string{
		"datasetName",
	})
	opts = append(opts, replaceOnChanges)
	opts = internal.PkgResourceDefaultOpts(opts)
	var resource Dataset
	err := ctx.RegisterResource("aws-native:iotanalytics:Dataset", name, args, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// GetDataset gets an existing Dataset resource's state with the given name, ID, and optional
// state properties that are used to uniquely qualify the lookup (nil if not required).
func GetDataset(ctx *pulumi.Context,
	name string, id pulumi.IDInput, state *DatasetState, opts ...pulumi.ResourceOption) (*Dataset, error) {
	var resource Dataset
	err := ctx.ReadResource("aws-native:iotanalytics:Dataset", name, id, state, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// Input properties used for looking up and filtering Dataset resources.
type datasetState struct {
}

type DatasetState struct {
}

func (DatasetState) ElementType() reflect.Type {
	return reflect.TypeOf((*datasetState)(nil)).Elem()
}

type datasetArgs struct {
	// The `DatasetAction` objects that automatically create the dataset contents.
	Actions []DatasetAction `pulumi:"actions"`
	// When dataset contents are created they are delivered to destinations specified here.
	ContentDeliveryRules []DatasetContentDeliveryRule `pulumi:"contentDeliveryRules"`
	// The name of the dataset.
	DatasetName *string `pulumi:"datasetName"`
	// A list of data rules that send notifications to CloudWatch, when data arrives late. To specify `lateDataRules` , the dataset must use a [DeltaTimer](https://docs.aws.amazon.com/iotanalytics/latest/APIReference/API_DeltaTime.html) filter.
	LateDataRules []DatasetLateDataRule `pulumi:"lateDataRules"`
	// Optional. How long, in days, message data is kept for the dataset.
	RetentionPeriod *DatasetRetentionPeriod `pulumi:"retentionPeriod"`
	// Metadata which can be used to manage the data set.
	//
	// For more information, see [Tag](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-resource-tags.html) .
	Tags []aws.Tag `pulumi:"tags"`
	// The `DatasetTrigger` objects that specify when the dataset is automatically updated.
	Triggers []DatasetTrigger `pulumi:"triggers"`
	// Optional. How many versions of dataset contents are kept. If not specified or set to null, only the latest version plus the latest succeeded version (if they are different) are kept for the time period specified by the `retentionPeriod` parameter. For more information, see [Keeping Multiple Versions of AWS IoT Analytics datasets](https://docs.aws.amazon.com/iotanalytics/latest/userguide/getting-started.html#aws-iot-analytics-dataset-versions) in the *AWS IoT Analytics User Guide* .
	VersioningConfiguration *DatasetVersioningConfiguration `pulumi:"versioningConfiguration"`
}

// The set of arguments for constructing a Dataset resource.
type DatasetArgs struct {
	// The `DatasetAction` objects that automatically create the dataset contents.
	Actions DatasetActionArrayInput
	// When dataset contents are created they are delivered to destinations specified here.
	ContentDeliveryRules DatasetContentDeliveryRuleArrayInput
	// The name of the dataset.
	DatasetName pulumi.StringPtrInput
	// A list of data rules that send notifications to CloudWatch, when data arrives late. To specify `lateDataRules` , the dataset must use a [DeltaTimer](https://docs.aws.amazon.com/iotanalytics/latest/APIReference/API_DeltaTime.html) filter.
	LateDataRules DatasetLateDataRuleArrayInput
	// Optional. How long, in days, message data is kept for the dataset.
	RetentionPeriod DatasetRetentionPeriodPtrInput
	// Metadata which can be used to manage the data set.
	//
	// For more information, see [Tag](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-resource-tags.html) .
	Tags aws.TagArrayInput
	// The `DatasetTrigger` objects that specify when the dataset is automatically updated.
	Triggers DatasetTriggerArrayInput
	// Optional. How many versions of dataset contents are kept. If not specified or set to null, only the latest version plus the latest succeeded version (if they are different) are kept for the time period specified by the `retentionPeriod` parameter. For more information, see [Keeping Multiple Versions of AWS IoT Analytics datasets](https://docs.aws.amazon.com/iotanalytics/latest/userguide/getting-started.html#aws-iot-analytics-dataset-versions) in the *AWS IoT Analytics User Guide* .
	VersioningConfiguration DatasetVersioningConfigurationPtrInput
}

func (DatasetArgs) ElementType() reflect.Type {
	return reflect.TypeOf((*datasetArgs)(nil)).Elem()
}

type DatasetInput interface {
	pulumi.Input

	ToDatasetOutput() DatasetOutput
	ToDatasetOutputWithContext(ctx context.Context) DatasetOutput
}

func (*Dataset) ElementType() reflect.Type {
	return reflect.TypeOf((**Dataset)(nil)).Elem()
}

func (i *Dataset) ToDatasetOutput() DatasetOutput {
	return i.ToDatasetOutputWithContext(context.Background())
}

func (i *Dataset) ToDatasetOutputWithContext(ctx context.Context) DatasetOutput {
	return pulumi.ToOutputWithContext(ctx, i).(DatasetOutput)
}

type DatasetOutput struct{ *pulumi.OutputState }

func (DatasetOutput) ElementType() reflect.Type {
	return reflect.TypeOf((**Dataset)(nil)).Elem()
}

func (o DatasetOutput) ToDatasetOutput() DatasetOutput {
	return o
}

func (o DatasetOutput) ToDatasetOutputWithContext(ctx context.Context) DatasetOutput {
	return o
}

// The `DatasetAction` objects that automatically create the dataset contents.
func (o DatasetOutput) Actions() DatasetActionArrayOutput {
	return o.ApplyT(func(v *Dataset) DatasetActionArrayOutput { return v.Actions }).(DatasetActionArrayOutput)
}

func (o DatasetOutput) AwsId() pulumi.StringOutput {
	return o.ApplyT(func(v *Dataset) pulumi.StringOutput { return v.AwsId }).(pulumi.StringOutput)
}

// When dataset contents are created they are delivered to destinations specified here.
func (o DatasetOutput) ContentDeliveryRules() DatasetContentDeliveryRuleArrayOutput {
	return o.ApplyT(func(v *Dataset) DatasetContentDeliveryRuleArrayOutput { return v.ContentDeliveryRules }).(DatasetContentDeliveryRuleArrayOutput)
}

// The name of the dataset.
func (o DatasetOutput) DatasetName() pulumi.StringPtrOutput {
	return o.ApplyT(func(v *Dataset) pulumi.StringPtrOutput { return v.DatasetName }).(pulumi.StringPtrOutput)
}

// A list of data rules that send notifications to CloudWatch, when data arrives late. To specify `lateDataRules` , the dataset must use a [DeltaTimer](https://docs.aws.amazon.com/iotanalytics/latest/APIReference/API_DeltaTime.html) filter.
func (o DatasetOutput) LateDataRules() DatasetLateDataRuleArrayOutput {
	return o.ApplyT(func(v *Dataset) DatasetLateDataRuleArrayOutput { return v.LateDataRules }).(DatasetLateDataRuleArrayOutput)
}

// Optional. How long, in days, message data is kept for the dataset.
func (o DatasetOutput) RetentionPeriod() DatasetRetentionPeriodPtrOutput {
	return o.ApplyT(func(v *Dataset) DatasetRetentionPeriodPtrOutput { return v.RetentionPeriod }).(DatasetRetentionPeriodPtrOutput)
}

// Metadata which can be used to manage the data set.
//
// For more information, see [Tag](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-resource-tags.html) .
func (o DatasetOutput) Tags() aws.TagArrayOutput {
	return o.ApplyT(func(v *Dataset) aws.TagArrayOutput { return v.Tags }).(aws.TagArrayOutput)
}

// The `DatasetTrigger` objects that specify when the dataset is automatically updated.
func (o DatasetOutput) Triggers() DatasetTriggerArrayOutput {
	return o.ApplyT(func(v *Dataset) DatasetTriggerArrayOutput { return v.Triggers }).(DatasetTriggerArrayOutput)
}

// Optional. How many versions of dataset contents are kept. If not specified or set to null, only the latest version plus the latest succeeded version (if they are different) are kept for the time period specified by the `retentionPeriod` parameter. For more information, see [Keeping Multiple Versions of AWS IoT Analytics datasets](https://docs.aws.amazon.com/iotanalytics/latest/userguide/getting-started.html#aws-iot-analytics-dataset-versions) in the *AWS IoT Analytics User Guide* .
func (o DatasetOutput) VersioningConfiguration() DatasetVersioningConfigurationPtrOutput {
	return o.ApplyT(func(v *Dataset) DatasetVersioningConfigurationPtrOutput { return v.VersioningConfiguration }).(DatasetVersioningConfigurationPtrOutput)
}

func init() {
	pulumi.RegisterInputType(reflect.TypeOf((*DatasetInput)(nil)).Elem(), &Dataset{})
	pulumi.RegisterOutputType(DatasetOutput{})
}
